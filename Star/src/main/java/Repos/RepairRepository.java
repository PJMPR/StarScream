package Repos;

import Computer.Repair;
import Repos.Mappers.IMapRSIntoEntity;

import java.sql.*;

public class RepairRepository extends BaseRepository<Repair> {
    public RepairRepository(Connection connection, IMapRSIntoEntity<Repair> mapper){
        super(connection, mapper);
    }

    @Override
    protected String CreateTableSQL() {
        return   "CREATE TABLE Repair(" +
                "ID int GENERATED BY DEFAULT AS IDENTITY" +
                "ProfileID int" +
                "NameOfDevice VARCHAR(50)" +
                "DateOfAcceptance date" +
                "ExpectedDateOfReception date" +
                "Price int" +
                ")";
    }

    @Override
    protected String tableName(){
        return "Repair";
    }

    @Override
    protected String InsertSQL(){
        return "INSERT INTO Repair(Profile ID, NameOfDevice, DateOfAcceptance, ExpectedDateOfReception, Price) VALUES (?, ?, ?, ?, ?)";
    }

    @Override
    protected String UpdateSQL(){
        return "UPDATE Repair set Profile ID = ?, NameOfDevice = ?, DateOfAcceptance = ?, ExpectedDateOfReception = ?, Price = ? WHERE ID = ?";
    }

    @Override
    protected void setupInsert(Repair entity) throws SQLException{
        Insert.setInt(1, entity.getPrice());
        Insert.setInt(2, entity.getProfileID());
        Insert.setDate(3, entity.getStartRepairDate());
        Insert.setDate(4, entity.getEndRepairDate());
        Insert.setString(5, entity.getNameOfDeviceInRepair());
    }

    @Override
    protected void setupUpdate(Repair entity) throws SQLException{
        Update.setInt(1, entity.getPrice());
        Update.setInt(2, entity.getProfileID());
        Update.setDate(3, entity.getStartRepairDate());
        Update.setDate(4, entity.getEndRepairDate());
        Update.setString(5, entity.getNameOfDeviceInRepair());
    }
}